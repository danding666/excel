# 幻灯片 1 / 标题页
- 标题：面向大规模智算中心的多类型二维装柜快速算法研究
- 作者/单位：作者姓名（可替换） / 数据中心研究组
- 场合：第31届新技术论坛
- 日期：2025 年
备注：
- 用一张主题图片（数据中心机房或服务器机柜）作为背景，底部写会议和日期。

# 幻灯片 2 / 大纲
- 研究背景与动机
- 问题定义与建模
- 算法总体框架（三级流水线）
- 关键数据结构：二维桶索引 + 线段树
- 算法实现与工程细节
- 实验设计与结果
- 消融与参数分析
- 结论与未来工作
备注：
- 简短介绍每个部分，提示听众报告结构。

# 幻灯片 3 / 研究背景（Motivation）
- AI 训练规模上升（LLM、CV 等）推动智算中心扩展
- 机柜资源有限：功率与高度（U）双约束
- 工程需求：在秒级完成 10k+ 服务器的容量规划与装柜
备注：
- 可用一张图示展示传统单维装柜（仅高度） vs 本问题的双维约束（功率+高度）。

# 幻灯片 4 / 问题定义（MT2D-BPP）
- 问题：多类型二维装柜问题（Multi-type 2D Bin Packing）
- 约束：
  - 每台服务器被且仅被装入一台机柜
  - 机柜有功率上限 p_max 和高度上限 h_max（常见 42U）
  - 多种机柜类型可选择
- 目标：最小化启用机柜数（或加权成本）
备注：
- 列出决策变量与目标（简化 MILP 表述可以放在附录）。

# 幻灯片 5 / 现有方法的局限
- 精确方法（MILP / CP-SAT）：规模受限（10k 台无法在工程时间内收敛）
- 传统贪心（FFD / BFD）：降维处理会导致维度耦合缺失、空间碎片
- 常规启发式：参数敏感、数据结构低效（检索 O(M)）
备注：
- 用一张表比较三类方法的时间复杂度与工程适配性（可引用论文表格摘要）。

# 幻灯片 6 / 本文贡献（Summary）
- 提出三级流水线启发式：预分组降维、索引化快速构造、邻域迭代改进
- 设计“二维桶索引 + 功率桶线段树”实现近 O(n log B) 的构造效率
- 在 10k+ 场景下秒级完成，利用率≥88%，与理论下界 gap ≤ ~4%
备注：
- 用 3-4 行突出贡献点，便于听众记住核心创新。

# 幻灯片 7 / 算法总体框架（图示）
- 三个阶段：
  1. 预分组降维（按功率步长 + 离散高度分组）
  2. 索引化快速构造（二维桶 + 线段树检索）
  3. 邻域迭代改进（关柜式迁移 + 可升级合并）
- 阶段间协同：前段降低复杂度，后段提升解质量
配图建议：
- 算法流程图（和论文图 3-1 类似）
备注：
- 强调流水线设计的工程意义（速度与质量的平衡）。

# 幻灯片 8 / 预分组降维（Pre-group）
- 思路：
  - 功率分桶（默认 ΔP=100W）
  - 高度以离散值作为桶（1U/2U/4U）
  - 组合键 = (功率桶ID, 高度桶ID)
- 排序策略：按“紧致度”降序（难装组优先），组内按功率/高度降序
- 作用：减少检索次数、优先处理难装服务器降低碎片
备注：
- 给出紧致度定义公式及示例表格（简短呈现）。

# 幻灯片 9 / 索引化构造：二维桶索引（概念）
- 对每种机柜类型维护二维桶：剩余功率桶 × 剩余高度桶
- 每个桶存机柜 ID 集合，支持 O(1) 的增删
- 在功率桶层级维护线段树用于快速定位满足条件的最小功率桶
配图建议：
- 二维表格示意（x 轴剩余高度，y 轴剩余功率），箭头示意查询流程
备注：
- 强调二维索引的工程实现和常数时间操作优势。

# 幻灯片 10 / 线段树（SegTree）用于功率桶检索
- 叶子：功率桶，存该桶的最大剩余高度
- 查询：给定所需功率/高度，线段树查找最小满足条件的功率桶（O(log PB)）
- 更新：叶子变化向上同步（O(log PB)）
代码要点：
- 数组实现、提前扩展至 2 的幂
备注：
- 可给出伪代码或关键方法名：find_first_ge、set。

# 幻灯片 11 / 服务器放置流程（构造细节）
- 对每台服务器：
  1. 筛选可用机柜类型（p_max ≥ p_req, h_max ≥ h_req）
  2. 在每种类型上用线段树定位功率桶 → 找高度桶 → 选机柜 ID
  3. 验证并更新二维桶与线段树；若无可用则前瞻开柜策略
- 前瞻开柜：选择最合适的机柜类型开启新机柜以减少碎片
备注：
- 用流程图或伪代码展示放置步骤（与论文图 3-3 对应）。

# 幻灯片 12 / 邻域迭代改进（Close-Rack & Upgrade-Merge）
- 关柜式（Close-Rack）：
  - 选低利用率机柜（按剩余资源率）为候选，逐台迁移其服务器，若成功则关闭
  - 候选数 K = max(10, M/6)
- 可升级合并：
  - 将两个小功率机柜的服务器尝试合并到一台大功率机柜
  - 控制频率：每 5 轮关柜执行 1 次
备注：
- 强调改进阶段在毫秒级完成并显著降低机柜数。

# 幻灯片 13 / 算法实现要点（工程）
- 代码架构（模块化）：
  - 模型层：Server、Rack、CabinetType
  - 索引层：SegTreeMax、RackIndex2D
  - 算法层：FastRackPacker（pre_group、build_initial、improve）
  - 工具层：DataGenerator、Metrics
- 实现语言/依赖：Python 3.10、NumPy、Pandas、NetworkX、psutil
备注：
- 可展示目录结构或关键类关系图。

# 幻灯片 14 / 实验设计
- 数据集：合成 + 真实数据（1k、5k、10k、20k）
- 对比算法：BFD-2D、FFD-2D+LS、CP-SAT（有时限）、LNS
- 评估指标：机柜数、与理论最小值差距（gap）、运行时间、利用率、稳定性
备注：
- 展示生成分布设定（功率、U 分布、机柜类型参数）。

# 幻灯片 15 / 核心实验结果（效率）
- 10k 场景运行时间：
  - 本文算法：≈1.35 s；BFD-2D：≈3.7 s；LNS：≈22.5 s；CP-SAT 超时
- 规模扩展：时间近似线性增长（10k→20k：1.35s→2.98s）
图表建议：
- 柱状图或折线图：不同算法随规模的运行时间对比
备注：
- 强调索引化使复杂度近似 O(n log B)。

# 幻灯片 16 / 核心实验结果（解质量）
- 10k 混合分布结果（均值 ± 方差）：
  - 本文算法：186 ± 0.8（gap ≈ 3.3%）；功率利用率 89.5%，高度 91.2%
  - BFD-2D：225（gap 23.9%）
  - LNS：192（gap 6.7%）
表或图：
- 表格或条形图显示机柜数与 gap 对比
备注：
- 强调在工程级时间内接近最优解。

# 幻灯片 17 / 消融实验与参数敏感性
- 消融结果：
  - 去掉预分组：运行时间 ↑ 40%
  - 去掉索引化：运行时间 ↑ 540%
  - 去掉邻域改进：机柜数 ↑ ~10%
- 参数建议：
  - ΔP=100W（综合平衡）
  - 邻域轮数 k=20-50（推荐 50）
  - K=max(10, M/6)
图表建议：
- 小表格列出关键指标变化
备注：
- 强调索引化是效率关键，邻域改进是质量关键。

# 幻灯片 18 / 结论
- 在工程级场景（10k+）实现秒级装柜，解质量接近理论下界（gap ≤ ~4%）
- 创新点：三级流水线与专用索引数据结构（二维桶 + 线段树）
- 工程可用：并行扩展、参数稳定、内存占用适中
备注：
- 用 2-3 行总结可带来的实际价值（节省机柜成本、实时规划能力）。

# 幻灯片 19 / 未来工作
- 扩展约束：热量/散热密度、PDU 平衡、网络亲和性
- 理论分析：给出近似比证明（α-approximation）
- 高级合并策略：多机柜聚类合并与整数子问题
备注：
- 可列举几个短期/中期可实现的扩展方向。

# 幻灯片 20 / Q&A
- 常见问题提示：
  - 算法对极端分布表现如何？
  - 迁移成本与在线重排如何考虑？
  - 如何集成到已有运维平台？
备注：
- 为每个问题准备 1-2 行回答要点。

# 幻灯片 21 / 附录：数学建模（可选）
- 简化 MILP 形式：
  - 决策变量 x_{i,r}, y_r, z_{r,t}
  - 约束：覆盖、功率、身度、类型选择逻辑
- 理论下界计算：
  - 基于总功率/高度除以最大机柜能力取上界的组合下界
备注：
- 适合技术观众需要细节时展示。

# 幻灯片 22 / 附录：关键代码片段
- SegTreeMax 的核心方法（伪代码）
- RackIndex2D 的 move_rack 要点
备注：
- 可把论文中的关键代码摘录放入附录页，便于科研或工程复现。

# 幻灯片 23 / 致谢与联系方式
- 致谢：项目团队、数据提供方（智算二期）
- 联系方式：邮箱 / GitHub（示例：@danding666）
备注：
- 放上项目仓库链接（若公开），便于听众获取代码和数据。